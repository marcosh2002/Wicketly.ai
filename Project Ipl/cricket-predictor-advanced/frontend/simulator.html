<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Simulator</title><link rel="stylesheet" href="assets/css/style.css"></head>
<body>
  <h1>Scenario Simulator</h1>
  <div>
    <label>Team1 Runs: <input id="runs1" type="range" min="50" max="250" value="160"></label> <span id="runs1v">160</span>
  </div>
  <div>
    <label>Team2 Runs: <input id="runs2" type="range" min="50" max="250" value="150"></label> <span id="runs2v">150</span>
  </div>
  <div>
    <label>Wkts Team1: <input id="wk1" type="range" min="0" max="10" value="3"></label> <span id="wk1v">3</span>
  </div>
  <div>
    <label>Wkts Team2: <input id="wk2" type="range" min="0" max="10" value="4"></label> <span id="wk2v">4</span>
  </div>
  <button id="runSim">Run Simulation</button>

  <pre id="simResult"></pre>

  <script>
  const el = id=>document.getElementById(id);
  ['runs1','runs2','wk1','wk2'].forEach(k=>el(k).addEventListener('input',()=>el(k+'v').textContent=el(k).value));
  el('runSim').addEventListener('click', async ()=>{
    const payload = {
      team1: 'CSK', team2: 'MI', venue: 'Neutral', weather: 'Sunny',
      runsTeam1: parseInt(el('runs1').value), runsTeam2: parseInt(el('runs2').value),
      wicketsTeam1: parseInt(el('wk1').value), wicketsTeam2: parseInt(el('wk2').value)
    };
    const res = await fetch('http://127.0.0.1:8000/predict/match', {
      method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)
    });
    const data = await res.json();
    window.latestPrediction = data;
    el('simResult').textContent = JSON.stringify(data, null, 2);

    // update main index prediction UI if open in same origin
    try {
      if (window.opener && window.opener.updateFromSimulator) window.opener.updateFromSimulator(data);
    } catch(e){}
  });
  </script>
</body>
</html>